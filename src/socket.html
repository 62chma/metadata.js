<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv=X-UA-Compatible content="IE=10">
    <meta charset="UTF-8">
    <style>
        body, html { overflow: hidden; margin: 0px; padding: 0px; width: 100%; height: 100%; }
    </style>
    <script>

        function do_click(data){
            var evt;
            if(typeof data != "string")
                data = JSON.stringify(data);
            // dispatch for IE
            if (document.createEventObject){
                evt = document.createEventObject();
                evt.data = data;
                document.body.fireEvent('onclick', evt);
            }else{
                document.body.dispatchEvent(new MouseEvent("click"), {
                    bubbles: true,
                    cancelable: true,
                    view: window,
                    data: data
                });
            }
        }

        function body_on_load(){
            var sid='4e8b16b6-89b0-11e2-9c06-da48b440c859', ws_url ='ws://light.oknosoft.local:8001', ws;
            do_click('load');
            try{
                ws = new WebSocket(ws_url);

                ws.onopen = function() {
                    do_click('open');
                };

                ws.onclose = function() {
                    do_click('close');
                };

                ws.onmessage = function(event) {
                    do_click(event);
                };

                ws.onerror = function(err) {
                    do_click(err);
                };

            }catch(err){
                do_click(err);
            }
        }

    </script>
</head>
<body onload='body_on_load();'>
</body>
</html>